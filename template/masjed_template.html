{% extends 'masjed_base.html' %}
{% load static %}

{% block title %}
پایگاه رسمی مسجد جامع امام سجاد(ع)
{% endblock %}


{% block content %}

<!-- اسلایدر -->
<div id="carouselExampleFade" style="background-color: #000000" class="carousel slide carousel-fade"
     data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="0"
                    class="active"></button>
            <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="1"></button>
        </div>


        <div class="carousel-item active">
            <video class="d-block w-100" style="max-height: 500px" autoplay loop muted>
                <source src="{% static 'assets/video/امام حسین فیلم - Trim.mp4' %}" type="video/mp4">
            </video>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
    </button>
</div>
<!-- خدمات -->
<section class="services-section py-5">
    <div class="container">
        <div class="row gy-4 justify-content-center">

            <!-- کارت 1 -->
            <div class="col-4 col-md-4 col-lg-4">
                <div class="service-box " id="openSidebarBtn"
                     style="cursor: pointer;">

                    <i class="far fa-folder-open fa-2x icon-blue mb-3 d-block"></i>
                    <p class="mb-0 fw-bold">آرشیو مراسمات</p>
                </div>
            </div>

            <!-- کارت 2 -->
            <div class="col-4 col-md-4 col-lg-4">
                <div class="service-box">
                    <span class="badge bg-warning text-dark soon-badge">به‌زودی</span>
                    <i class="fas fa-trophy fa-2x icon-blue mb-3"></i>
                    <p class="mb-0 fw-bold">ستارگان مسجد</p>
                </div>
            </div>

            <!-- ✅ دکمه پخش زنده مخصوص موبایل -->
            <div class="col-4 d-md-none">
                <a href="{% url 'website:live' %}"
                   class="live-btn-mobile d-block text-center text-white text-decoration-none">
                    <i class="fas fa-broadcast-tower fa-2x mb-2 d-block"></i>
                    <span class="fw-bold">پخش زنده</span>
                </a>
            </div>

            <div class="col-4 col-md-4 col-lg-4">
                <a href="{% url 'website:report' %}" class="text-decoration-none">
                    <div class="service-box">
                        <i class="fas fa-bullhorn fa-2x icon-blue mb-3"></i>
                        <p class="mb-0 fw-bold text-dark">آخرین اطلاعیه‌ها</p>
                    </div>
                </a>
            </div>


            <!-- کارت 4 -->
            <div class="col-4 col-md-4 col-lg-4">
                <div class="service-box">
                    <span class="badge bg-warning text-dark soon-badge">به‌زودی</span>
                    <i class="fas fa-gift fa-2x icon-blue mb-3"></i>
                    <p class="mb-0 fw-bold">هدیه و نذورات</p>
                </div>
            </div>

            <!-- کارت 5 -->
            <div class="col-4 col-md-4 col-lg-4">
                <div class="service-box">
                    <span class="badge bg-warning text-dark soon-badge">به‌زودی</span>
                    <i class="far fa-calendar-alt fa-2x icon-blue mb-3"></i>
                    <p class="mb-0 fw-bold">رزرو سالن اجتماعات</p>
                </div>
            </div>

        </div>
    </div>
</section>


<section class="container-fluid my-5" dir="rtl">
    <!-- هدر -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="h5 mb-0">آخرین کلیپ‌ها</h2>
    </div>

    <!-- ریل + دکمه‌ها -->
    <div class="position-relative">
        <!-- دکمه سمت راست -->
        <button class="btn btn-light shadow position-absolute end-0 top-50 translate-middle-y"
                style="z-index: 2;" onclick="scrollRail('rail2', 1)">
            ›
        </button>

        <!-- دکمه سمت چپ -->
        <button class="btn btn-light shadow position-absolute start-0 top-50 translate-middle-y"
                style="z-index: 2;" onclick="scrollRail('rail2', -1)">
            ‹
        </button>

        <!-- ریل کارت‌ها -->
        <div id="rail2" class="d-flex flex-nowrap overflow-auto pb-2 px-2"
             style="scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;">
            {% for clip in clips %}
            <div class="card shadow-sm rounded overflow-hidden me-3"
                 style="min-width:280px; scroll-snap-align:start; max-width: 350px;">
                <div style="height:180px; overflow:hidden; position:relative;">
                    <img src="{{ clip.image.url }}"
                         style="width:100%; height:100%; object-fit:cover;"
                         alt="{{ clip.slug }}">
                    <span class="badge rounded-pill text-light fw-bold fs-6 position-absolute top-0 start-0 m-2 px-3 py-2"
                          style="background-color: #00345b">
                        <i class="fa fa-video-camera" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="card-body p-3">
                    <h3 class="h6 mt-2 mb-1 text-truncate">{{ clip.name }}</h3>
                    <div class="text-muted small mb-2">
                        <i class="fa-solid fa-microphone text-danger ms-1"></i> {{ clip.owner.name }}
                    </div>
                    <div class="d-flex justify-content-between">
                        <a href="{% url 'website:clip' slug=clip.slug %}"
                           class="btn btn-outline-dark rounded-pill text-light"
                           style="background-color: #00345b;">
                            مشاهده
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>


<!-- محتوای رسانه‌ای تازه مسجد -->
<section class="container-fluid my-5" dir="rtl">
    <!-- هدر -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="h5 mb-0">آرشیو آخرین مراسمات مسجد</h2>
    </div>

    <!-- ریل + دکمه‌ها -->
    <div class="position-relative">
        <!-- دکمه سمت راست -->
        <button class="btn btn-light shadow position-absolute end-0 top-50 translate-middle-y"
                style="z-index: 2;" onclick="scrollRail('rail', 1)">
            ›
        </button>

        <!-- دکمه سمت چپ -->
        <button class="btn btn-light shadow position-absolute start-0 top-50 translate-middle-y"
                style="z-index: 2;" onclick="scrollRail('rail', -1)">
            ‹
        </button>

        <!-- ریل کارت‌ها -->
        <div id="rail" class="d-flex flex-nowrap overflow-auto pb-2 px-2"
             style="scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;">
            {% for media_celected in mediafile_selected %}
            <div class="card shadow-sm rounded overflow-hidden me-3"
                 style="min-width:280px; scroll-snap-align:start; max-width: 350px;">
                <div style="height:180px; overflow:hidden; position:relative;">
                    <img src="{{ media_celected.image.url }}"
                         style="width:100%; height:100%; object-fit:cover;"
                         alt="{{ media_celected.slug }}">
                    <span class="badge rounded-pill text-light fw-bold fs-6 position-absolute top-0 start-0 m-2 px-3 py-2"
                          style="background-color: #00345b;">
                        {% if media_celected.media_type == 'audio' %}
                            <i class="fa-solid fa-music"></i>
                        {% else %}
                            <i class="fa fa-video-camera" aria-hidden="true"></i>
                        {% endif %}
                    </span>
                </div>
                <div class="card-body p-3">
                    <h3 class="h6 mt-2 mb-1 text-truncate">{{ media_celected.title }}</h3>
                    <div class="text-muted small mb-2">
                        <i class="fa-solid fa-microphone text-danger ms-1"></i> {{ media_celected.owner.name }}
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="text-muted small mb-2">
                            <i class="fa-regular fa-calendar-alt text-danger ms-1"></i> {{ media_celected.date }}
                        </div>
                        <a href="{% url 'website:single_media' media_slug=media_celected.slug %}"
                           class="btn btn-outline-dark rounded-pill text-light"
                           style="background-color: #00345b;">
                            مشاهده
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>


<!-- درباره مسجد -->
<section class="py-5">
    <div class="container-fluid mt-5">
        <div class="about rounded-4 shadow-lg p-4 position-relative" style="background: rgba(255,255,255,0.9);">
            <div class="row">
                <h2 class="text-center my-3 display-4 fw-bold">درباره مسجد</h2>
            </div>
            <div class="row mt-3 align-items-center justify-content-center">
                <div class="col-md-6 col-12 order-2 order-md-1">
                    <p class="text-lg-start text-center px-4 px-lg-2 fs-5" style="line-height: 1.8;">
                        مسجد جامع امام سجاد علیه‌السلام با زیربنای ۲۲٬۰۰۰ متر مربع، یکی از بزرگ‌ترین و جامع‌ترین
                        مراکز
                        مذهبی، فرهنگی و اجتماعی در قلب شهر است. این مسجد با معماری چشم‌نواز و امکانات گسترده، فراتر
                        از
                        عبادت، بستری برای آموزش، نشست‌های فرهنگی، خدمات اجتماعی، ورزش، و فعالیت‌های متنوع فراهم کرده
                        است.

                        فضاهای متعددی همچون نمازخانه‌، سالن‌های اجتماعات، کلاس‌های آموزشی، کتابخانه،
                        سالن
                        ورزشی، آشپزخانه صنعتی و.. این مجموعه را به الگویی برای مساجد چندمنظوره مدرن
                        تبدیل کرده است.

                        مسجد امام سجاد (ع) نه تنها محل عبادت، بلکه کانونی برای رشد معنوی، علمی و اجتماعی نسل امروز و
                        فرداست.


                    </p>
                </div>
                <div class="col-md-6 col-12 order-1 order-md-2 d-flex justify-content-center">
                    <img src="{% static 'assets/img/mosque.jpg' %}" style="width: 600px; height: 400px;"
                         class="mt-3 mt-lg-0" alt="mosque">
                </div>
            </div>
        </div>
    </div>
</section>


<a href="{% url 'website:live' %}" id="liveButton"
   class="btn btn-danger position-fixed bottom-0 end-0 m-3 p-3 rounded-pill shadow-lg z-10">
    <i class="fas fa-broadcast-tower me-2"></i> پخش زنده
</a>

<!-- برای اسکرول فقی در حالت دکستاپ دکمه اضافه میشه -->
<!-- جاوااسکریپت -->
<script>
function scrollRail(railId, direction) {
    const rail = document.getElementById(railId);
    if (rail) {
        rail.scrollBy({ left: direction * 300, behavior: 'smooth' });
    }
}
</script>


{% endblock %}